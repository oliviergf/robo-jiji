(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{199:function(e,t,n){},215:function(e,t,n){e.exports=n(442)},220:function(e,t,n){},442:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(7),r=n.n(l),i=(n(220),n(24)),c=n(15),s=n(29),u=n(30),m=n(19),h=n(32),p=n(92),d=n.n(p),g=d.a.create({withCredentials:!0}),f=n(9),E=n(475),v=n(493),w=n(494),b=n(478),C=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(f.a)({},e.target.name,e.target.value))},n.handleRegisterInput=function(e){d.a.post("http://localhost:3000/register",{firstname:n.state.firstname,lastname:n.state.lastname,email:n.state.email,password:n.state.password}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),e.preventDefault()},n.state={firstname:"",lastname:"",email:"",password:"",confirmation:""},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("form",{onSubmit:this.handleRegisterInput},o.a.createElement("div",null,o.a.createElement(E.a,null,o.a.createElement(v.a,{htmlFor:"component-simple"},"firstname"),o.a.createElement(w.a,{id:"component-simple",name:"firstname",value:this.state.firstname,onChange:this.handleChange}))),o.a.createElement("div",null,o.a.createElement(E.a,null,o.a.createElement(v.a,{htmlFor:"component-simple"},"lastname"),o.a.createElement(w.a,{id:"component-simple",name:"lastname",value:this.state.lastname,onChange:this.handleChange}))),o.a.createElement("div",null,o.a.createElement(E.a,null,o.a.createElement(v.a,{htmlFor:"component-simple"},"email"),o.a.createElement(w.a,{id:"component-simple",name:"email",value:this.state.email,onChange:this.handleChange}))),o.a.createElement("div",null,o.a.createElement(E.a,null,o.a.createElement(v.a,{htmlFor:"component-simple"},"password"),o.a.createElement(w.a,{id:"component-simple",name:"password",value:this.state.password,onChange:this.handleChange}))),o.a.createElement("div",null,o.a.createElement(E.a,null,o.a.createElement(v.a,{htmlFor:"component-simple"},"confirmation"),o.a.createElement(w.a,{id:"component-simple",name:"confirmation",value:this.state.confirmation,onChange:this.handleChange}))),o.a.createElement("div",null,o.a.createElement(b.a,{type:"submit",value:"Submit"},"Submit")))}}]),t}(o.a.Component),y=n(38),O=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(f.a)({},e.target.name,e.target.value))},n.handleRegisterInput=function(e){var t=Object(m.a)(n);g.post("http://localhost:3000/login",{email:n.state.email,password:n.state.password}).then((function(e){t.props.logUserIn(e.data),t.setState({fireRedirect:!0})})).catch((function(e){console.log(e)})),e.preventDefault()},n.state={email:"",password:"",fireRedirect:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.fireRedirect;return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.handleRegisterInput},o.a.createElement("div",null,o.a.createElement(E.a,null,o.a.createElement(v.a,{htmlFor:"component-simple"},"email"),o.a.createElement(w.a,{id:"component-simple",name:"email",value:this.state.email,onChange:this.handleChange}))),o.a.createElement("div",null,o.a.createElement(E.a,null,o.a.createElement(v.a,{htmlFor:"component-simple"},"password"),o.a.createElement(w.a,{id:"component-simple",name:"password",value:this.state.password,onChange:this.handleChange}))),o.a.createElement("div",null,o.a.createElement(b.a,{type:"submit",value:"login"},"login"))),e&&o.a.createElement(y.a,{to:"/home"}))}}]),t}(o.a.Component),j=n(479),k=n(490),S=n(35),D=n(70),L=n.n(D);function N(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),a=new Uint8Array(n.length),o=0;o<n.length;++o)a[o]=n.charCodeAt(o);return a}function x(){var e,t;return L.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,L.a.awrap(navigator.serviceWorker.ready);case 2:return e=n.sent,n.prev=3,n.next=6,L.a.awrap(e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:N("BFkjlGMNKytjD2oOnED0Zb9ENXZqopsSRAQjZMun-RQDzjy6AX7qOpMHNjeVnYgBXSdgnf783Y1nSt9DwmqG8ko")}));case 6:return t=n.sent,console.log("Registered push"),console.log("Sending push"),n.next=11,L.a.awrap(fetch("/subscribeNotif",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}));case 11:console.log("Sent push"),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(3),console.log(n.t0);case 17:case"end":return n.stop()}}),null,null,[[3,14]])}var z=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(j.a,{className:"home"},o.a.createElement(k.a,{justifyContent:"center",alignItems:"center"},o.a.createElement("div",null,"put nice image here"),o.a.createElement("div",null,"description of what we do"),o.a.createElement(b.a,null,o.a.createElement(S.b,{style:{textDecoration:"none",color:"white"},to:"/register"},"Subscribe")),o.a.createElement(b.a,null,o.a.createElement(S.b,{style:{textDecoration:"none",color:"white"},to:"/login"},"Login")),o.a.createElement(b.a,{onClick:x},"push test")))}}]),t}(o.a.Component),F=n(31),I=n(124),M=n(118),R=M.compose,P=M.withProps,U=n(124),A=U.withScriptjs,B=U.withGoogleMap,W=U.GoogleMap,Z=n(438).DrawingManager,T=R(P({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyBnIReQN29uQlQ9XPcplFlm5R8XnU2n0i4&v=3.exp&libraries=geometry,drawing,places",loadingElement:o.a.createElement("div",{style:{height:"100%"}}),containerElement:o.a.createElement("div",{style:{height:"400px"}}),mapElement:o.a.createElement("div",{style:{height:"100%"}})}),A,B)((function(e){return o.a.createElement(W,{defaultZoom:12,defaultCenter:{lat:e.userLocation.lat,lng:e.userLocation.lng}},e.showDrawManager&&o.a.createElement(Z,{defaultDrawingMode:"polygon",defaultOptions:{drawingControl:!0,drawingControlOptions:{position:"",drawingModes:["polygon"]},polygonOptions:{editable:!1}},onPolygonComplete:function(t){return e.complete(t)}}),e.zonesToDisplay.map((function(e){return console.log(e.polygon),o.a.createElement(I.Polygon,{key:e.id,path:e.polygon.getPath()})})))})),G=n(480),Q=n(486),X=n(443),q=n(481),H=n(483),J=n(482),K=n(492),V=n(484),Y=n(485),$=n(96),_=n(128),ee=n.n(_),te=n(206),ne=n.n(te),ae=Object(G.a)((function(e){return{root:{flexGrow:1,maxWidth:752},demo:{backgroundColor:e.palette.background.paper},title:{margin:e.spacing(4,0,2)}}}));function oe(e){var t,n,a,l=ae();return o.a.createElement("div",{className:l.root},o.a.createElement(Y.a,{container:!0,spacing:2},o.a.createElement(Y.a,{item:!0,xs:12,md:6},o.a.createElement($.a,{variant:"h6",className:l.title},"Selected Zones"),o.a.createElement("div",{className:l.demo},o.a.createElement(Q.a,null,(t=e.zoneList,n=e.deleteZoneFunc,a=e.onSelect,0!==t.length?t.map((function(e){return o.a.createElement(X.a,{button:!0,name:e.id,key:e.id,onClick:function(){!function(e,t){t(e)}(e.id,a)}},o.a.createElement(q.a,null,o.a.createElement(K.a,null,o.a.createElement(ee.a,null))),o.a.createElement(J.a,{primary:"Single-line item"}),o.a.createElement(H.a,null,o.a.createElement(V.a,{edge:"end","aria-label":"delete",onClick:function(){return n(e.id)}},o.a.createElement(ne.a,null))))})):o.a.createElement(X.a,null,o.a.createElement(q.a,null,o.a.createElement(K.a,null,o.a.createElement(ee.a,null))),o.a.createElement(J.a,{primary:"you have no zones!"}))))))))}var le=n(207),re=n.n(le),ie=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).findUserCoord=function(){var e={};return navigator.geolocation.getCurrentPosition((function(t){e.lat=t.coords.latitude,e.lng=t.coords.longitude}),(function(){e.lat=45.496205,e.lng=-73.571895})),e},n.componentDidMount=function(){var e=Object(m.a)(n);setTimeout((function(){g.get("http://localhost:3000/zone").then((function(t){e.initZones(t.data)})).catch((function(e){console.log(e)})).then((function(){}))}),300)},n.initZones=function(e){var t=[];e.map((function(e){var n=e.path.map((function(e){return{lat:e[0],lng:e[1]}})),a=new window.google.maps.Polygon({path:n,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2});t.push({id:e.zoneId,polygon:a})})),n.setState({zones:t})},n.onZoneSelect=function(e){console.log(e)},n.onCreateClick=function(){n.setState({allowDraw:!0})},n.onDeleteClick=function(e){var t=Object(m.a)(n);g.delete("http://localhost:3000/zone",{data:{zoneId:e}}).then((function(n){if(200===n.status){var a=t.state.zones.find((function(t){return t.id===e}));a.polygon.setMap(null),t.setState({zones:t.state.zones.filter((function(e){return e.id!==a.id}))})}})).catch((function(e){console.log(e)}))},n.onPolygonComplete=function(e){var t={id:re()(),polygon:e};n.setState({zones:[].concat(Object(F.a)(n.state.zones),[t]),allowDraw:!1});var a=[];e.getPath().i.map((function(e){return a.push([e.lat(),e.lng()])})),g.post("http://localhost:3000/zone",{zoneId:t.id,path:a}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},n.state={test:{},zones:[],allowDraw:!1,userLocation:n.findUserCoord()},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(j.a,{className:"home"},o.a.createElement(b.a,{onClick:this.onCreateClick},"create"),o.a.createElement(T,{isMarkerShown:!0,complete:this.onPolygonComplete,showDrawManager:this.state.allowDraw,zonesToDisplay:this.state.zones,userLocation:this.state.userLocation}),o.a.createElement(oe,{zoneList:this.state.zones,deleteZoneFunc:this.onDeleteClick,onSelect:this.onZoneSelect}))}}]),t}(o.a.Component),ce=(n(198),n(199),n(491)),se=n(487),ue=n(488),me=n(489),he=n(5),pe=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(e){n.setState({anchorEl:e.currentTarget})},n.handleClose=function(){n.setState({anchorEl:null})},n.handleLogOut=function(){var e=Object(m.a)(n);g.get("http://localhost:3000/logout").then((function(t){e.setState({anchorEl:null}),e.props.userLoggedOut()})).catch((function(e){console.log(e)})).then((function(){}))},n.state={anchorEl:null},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.props.classes;return e=this.props.isLoggedIn?o.a.createElement("div",null,o.a.createElement(b.a,{style:{textDecoration:"none",color:"white"},"aria-controls":"simple-menu","aria-haspopup":"true",onClick:this.handleClick},this.props.userFirstName),o.a.createElement(ce.a,{id:"simple-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl),onClose:this.handleClose},o.a.createElement(se.a,{onClick:this.handleClose},"Profile"),o.a.createElement(se.a,{onClick:this.handleClose},"My account"),o.a.createElement(se.a,{onClick:this.handleLogOut},o.a.createElement(S.b,{to:"/home"},"Logout")))):o.a.createElement(b.a,{edge:"start",color:"inherit"},o.a.createElement(S.b,{style:{textDecoration:"none",color:"white"},to:"/login"},"login")),o.a.createElement(ue.a,{position:"static"},o.a.createElement(me.a,null,o.a.createElement(b.a,{edge:"start",color:"inherit"},o.a.createElement(S.b,{style:{textDecoration:"none",color:"white"},to:"/home"},"home")),o.a.createElement(b.a,{edge:"start",color:"inherit"},o.a.createElement(S.b,{style:{textDecoration:"none",color:"white"},to:"/map"},"Map")),o.a.createElement($.a,{variant:"h6",className:t.title},"Kijiji Bot App"),e))}}]),t}(o.a.Component),de=Object(he.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}),{withTheme:!0})(pe),ge=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(e){n.setState({anchorEl:e.currentTarget})},n.handleClose=function(){n.setState({anchorEl:null})},n.logoutHandeler=function(){n.setState({isLoggedIn:!1,userFirstName:""})},n.logUserCredentials=function(e){n.setState({isLoggedIn:!0,userFirstName:e.firstname})},n.testBrowserSession=function(){var e=Object(m.a)(n);g.get("http://localhost:3000/sessionLogin").then((function(t){e.logUserCredentials(t.data)})).catch((function(e){console.log(e)}))},n.state={isLoggedIn:!1,userFirstName:"",anchorEl:null},n.testBrowserSession(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:e.root},o.a.createElement(de,{userLoggedOut:this.logoutHandeler,isLoggedIn:this.state.isLoggedIn,userFirstName:this.state.userFirstName})),o.a.createElement("div",{className:"body"},o.a.createElement(y.d,null,o.a.createElement(y.b,{path:"/register"},o.a.createElement(C,null)),o.a.createElement(y.b,{path:"/login"},o.a.createElement(O,{logUserIn:this.logUserCredentials})),o.a.createElement(y.b,{path:"/map"},o.a.createElement(ie,null)),o.a.createElement(y.b,{path:"/"},o.a.createElement(z,null)))))}}]),t}(o.a.Component),fe=Object(he.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}),{withTheme:!0})(ge),Ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ve(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(o.a.createElement(S.a,null,o.a.createElement(fe,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ee?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ve(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ve(t,e)}))}}()}},[[215,1,2]]]);
//# sourceMappingURL=main.2b05d3e3.chunk.js.map